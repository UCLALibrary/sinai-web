<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <!-- for the navbar -->
    <link rel="stylesheet" type="text/css" href="/css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />

    <!-- mirador -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script src="/mirador/mirador.min.js"></script>
    <link href="/mirador/css/mirador-combined.min.css" rel="stylesheet" type="text/css">
    <title>Mirador Viewer</title>
    <style type="text/css">
     #viewer {  width: 100%; height: 100%; }
    </style>

</head>
  <body>
    {{> templates/main-navbar}}
    {{#unless error}}
      <div id="viewer"></div>

      <script type="text/javascript">

       $(function() {
           var anno_token;
           Mirador({
            "id": "viewer",
            "showAddFromURLBox": false,
            "layout": "1",
            "data": [
              {{#each sinai-manuscript-metadata}}
              {
                "manifestUri": "{{imageserver}}/iiif/{{urlencode ARK}}/manifest",
                "location": "UCLA"
              },
              {{/each}}
            ],
            "windowObjects": [{
              "loadedManifest": "{{imageserver}}/iiif/{{id}}/manifest",
              "slotAddress" : "row1",
              "availableViews": ["ImageView", "ThumbnailsView", "BookView"],
              "viewType": "ImageView",
              "annotationLayer": false,
              "annotationState": "annoOff",
              "overlay": false,
              "fullScreen": true,
              "displayLayout": true,
              "layoutOptions": {
                "newObject": true,
                "close": true,
              },
              "bottomPanel": true,
              "bottomPanelVisible": true,
              "sidePanel": false,
              "sidePanelVisible": false
            }]
          });
       });
      </script>
    {{else}}
      <p>There was an error loading Mirador. Please contact the system administrator.</p>
    {{/unless}}
  </body>
</html>
